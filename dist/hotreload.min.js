(()=>{function p(...u){G.config.loggingEnabled&&console.log("[hotwire hotreload]",...u)}var E=class{static async reload(){return new E().reload()}async reload(){await this.#t()}async#t(){p("Reload html with Turbo..."),this.#e(),await this.#r()}#e(){document.addEventListener("turbo:before-render",()=>{Turbo.navigator.currentVisit.scrolled=!0},{once:!0})}#r(){return new Promise(i=>{document.addEventListener("turbo:load",()=>i(document),{once:!0}),window.Turbo.cache.clear(),window.Turbo.visit(window.location)})}};function K(u){return u.split("/").pop().split(".")[0]}function F(u){return u.replace(/\?.*$/,"")}function Q(u,i){let s=new URL(u,window.location.origin);return Object.entries(i).forEach(([c,g])=>{s.searchParams.set(c,g)}),s.toString()}function P(u){return Q(u,{reload:Date.now()})}async function A(){let u=P(Q(window.location.href,{hotwire_spark:"true"})),i=await fetch(u,{headers:{Accept:"text/html"}});if(!i.ok)throw new Error(`${i.status} when fetching ${u}`);let s=await i.text();return new DOMParser().parseFromString(s,"text/html")}function X(u){return document.querySelector(`meta[name="hotwire-hotreload:${u}"]`)?.content}var Z=function(){"use strict";let u=new Set,i={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:b,afterNodeAdded:b,beforeNodeMorphed:b,afterNodeMorphed:b,beforeNodeRemoved:b,afterNodeRemoved:b,beforeAttributeUpdated:b,beforeNodePantried:b},head:{style:"merge",shouldPreserve:function(e){return e.getAttribute("im-preserve")==="true"},shouldReAppend:function(e){return e.getAttribute("im-re-append")==="true"},shouldRemove:b,afterHeadMorphed:b}};function s(e,t,r={}){e instanceof Document&&(e=e.documentElement),typeof t=="string"&&(t=le(t));let n=se(t),a=ne(e,n,r);return c(e,n,a)}function c(e,t,r){if(r.head.block){let n=e.querySelector("head"),a=t.querySelector("head");if(n&&a){let o=U(a,n,r);Promise.all(o).then(function(){c(e,t,Object.assign(r,{head:{block:!1,ignore:!0}}))});return}}if(r.morphStyle==="innerHTML")return N(t,e,r),r.config.twoPass&&Y(e,r),Array.from(e.children);if(r.morphStyle==="outerHTML"||r.morphStyle==null){let n=de(t,e,r),a=n?.previousSibling??null,o=n?.nextSibling??null,l=H(e,n,r);if(n){if(l){let f=ue(a,l,o);return r.config.twoPass&&Y(l.parentNode,r),f}}else return[]}else throw"Do not understand how to morph style "+r.morphStyle}function g(e,t){return!!t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}function H(e,t,r){return r.ignoreActive&&e===document.activeElement?null:t==null?r.callbacks.beforeNodeRemoved(e)===!1?e:(e.parentNode?.removeChild(e),r.callbacks.afterNodeRemoved(e),null):I(e,t)?(r.callbacks.beforeNodeMorphed(e,t)===!1||(e instanceof HTMLHeadElement&&r.head.ignore||(e instanceof HTMLHeadElement&&r.head.style!=="morph"?U(t,e,r):(q(t,e,r),g(e,r)||N(t,e,r))),r.callbacks.afterNodeMorphed(e,t)),e):r.callbacks.beforeNodeRemoved(e)===!1||r.callbacks.beforeNodeAdded(t)===!1?e:(e.parentNode?.replaceChild(t,e),r.callbacks.afterNodeAdded(t),r.callbacks.afterNodeRemoved(e),t)}function N(e,t,r){e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content);let n=e.firstChild,a=t.firstChild,o;for(;n;){if(o=n,n=o.nextSibling,a==null){if(r.config.twoPass&&r.persistentIds.has(o.id))t.appendChild(o);else{if(r.callbacks.beforeNodeAdded(o)===!1)continue;t.appendChild(o),r.callbacks.afterNodeAdded(o)}S(r,o);continue}if($(o,a,r)){H(a,o,r),a=a.nextSibling,S(r,o);continue}let l=ae(e,t,o,a,r);if(l){a=W(a,l,r),H(l,o,r),S(r,o);continue}let f=oe(e,t,o,a,r);if(f){a=W(a,f,r),H(f,o,r),S(r,o);continue}if(r.config.twoPass&&r.persistentIds.has(o.id))t.insertBefore(o,a);else{if(r.callbacks.beforeNodeAdded(o)===!1)continue;t.insertBefore(o,a),r.callbacks.afterNodeAdded(o)}S(r,o)}for(;a!==null;){let l=a;a=a.nextSibling,J(l,r)}}function y(e,t,r,n){return e==="value"&&n.ignoreActiveValue&&t===document.activeElement?!0:n.callbacks.beforeAttributeUpdated(e,t,r)===!1}function q(e,t,r){let n=e.nodeType;if(n===1){let a=e,o=t,l=a.attributes,f=o.attributes;for(let h of l)y(h.name,o,"update",r)||o.getAttribute(h.name)!==h.value&&o.setAttribute(h.name,h.value);for(let h=f.length-1;0<=h;h--){let w=f[h];if(!!w&&!a.hasAttribute(w.name)){if(y(w.name,o,"remove",r))continue;o.removeAttribute(w.name)}}}(n===8||n===3)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),g(t,r)||te(e,t,r)}function B(e,t,r,n){if(!(e instanceof Element&&t instanceof Element))return;let a=e[r],o=t[r];if(a!==o){let l=y(r,t,"update",n);l||(t[r]=e[r]),a?l||t.setAttribute(r,a):y(r,t,"remove",n)||t.removeAttribute(r)}}function te(e,t,r){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&e.type!=="file"){let n=e.value,a=t.value;B(e,t,"checked",r),B(e,t,"disabled",r),e.hasAttribute("value")?n!==a&&(y("value",t,"update",r)||(t.setAttribute("value",n),t.value=n)):y("value",t,"remove",r)||(t.value="",t.removeAttribute("value"))}else if(e instanceof HTMLOptionElement&&t instanceof HTMLOptionElement)B(e,t,"selected",r);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let n=e.value,a=t.value;if(y("value",t,"update",r))return;n!==a&&(t.value=n),t.firstChild&&t.firstChild.nodeValue!==n&&(t.firstChild.nodeValue=n)}}function U(e,t,r){let n=[],a=[],o=[],l=[],f=r.head.style,h=new Map;for(let d of e.children)h.set(d.outerHTML,d);for(let d of t.children){let m=h.has(d.outerHTML),T=r.head.shouldReAppend(d),V=r.head.shouldPreserve(d);m||V?T?a.push(d):(h.delete(d.outerHTML),o.push(d)):f==="append"?T&&(a.push(d),l.push(d)):r.head.shouldRemove(d)!==!1&&a.push(d)}l.push(...h.values()),O("to append: ",l);let w=[];for(let d of l){O("adding: ",d);let m=document.createRange().createContextualFragment(d.outerHTML).firstChild;if(O(m),r.callbacks.beforeNodeAdded(m)!==!1){if("href"in m&&m.href||"src"in m&&m.src){let T,V=new Promise(function(be){T=be});m.addEventListener("load",function(){T()}),w.push(V)}t.appendChild(m),r.callbacks.afterNodeAdded(m),n.push(m)}}for(let d of a)r.callbacks.beforeNodeRemoved(d)!==!1&&(t.removeChild(d),r.callbacks.afterNodeRemoved(d));return r.head.afterHeadMorphed(t,{added:n,kept:o,removed:a}),w}function O(...e){}function b(){}function re(e){let t=Object.assign({},i);return Object.assign(t,e),t.callbacks=Object.assign({},i.callbacks,e.callbacks),t.head=Object.assign({},i.head,e.head),t}function ne(e,t,r){let n=re(r);return{target:e,newContent:t,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:pe(e,t),deadIds:new Set,persistentIds:n.twoPass?ge(e,t):new Set,pantry:n.twoPass?ie():document.createElement("div"),callbacks:n.callbacks,head:n.head}}function ie(){let e=document.createElement("div");return e.hidden=!0,document.body.insertAdjacentElement("afterend",e),e}function $(e,t,r){return e==null||t==null?!1:e instanceof Element&&t instanceof Element&&e.tagName===t.tagName?e.id!==""&&e.id===t.id?!0:L(r,e,t)>0:!1}function I(e,t){return e==null||t==null||e.id&&e.id!==t.id?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName}function W(e,t,r){let n=e;for(;n!==t;){let a=n;n=a.nextSibling,J(a,r)}return S(r,t),t.nextSibling}function ae(e,t,r,n,a){let o=L(a,r,t),l=null;if(o>0){l=n;let f=0;for(;l!=null;){if($(r,l,a))return l;if(f+=L(a,l,e),f>o)return null;l=l.nextSibling}}return l}function oe(e,t,r,n,a){let o=n,l=r.nextSibling,f=0;for(;o!=null;){if(L(a,o,e)>0)return null;if(I(o,r))return o;if(I(o,l)&&(f++,l=l.nextSibling,f>=2))return null;o=o.nextSibling}return o}let C=new WeakSet;function le(e){let t=new DOMParser,r=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(r.match(/<\/html>/)||r.match(/<\/head>/)||r.match(/<\/body>/)){let n=t.parseFromString(e,"text/html");if(r.match(/<\/html>/))return C.add(n),n;{let a=n.firstChild;return a?(C.add(a),a):null}}else{let a=t.parseFromString("<body><template>"+e+"</template></body>","text/html").body.querySelector("template").content;return C.add(a),a}}function se(e){if(e==null)return document.createElement("div");if(C.has(e))return e;if(e instanceof Node){let t=document.createElement("div");return t.append(e),t}else{let t=document.createElement("div");for(let r of[...e])t.append(r);return t}}function ue(e,t,r){let n=[],a=[];for(;e!=null;)n.push(e),e=e.previousSibling;let o=n.pop();for(;o!==void 0;)a.push(o),t.parentElement?.insertBefore(o,t),o=n.pop();for(a.push(t);r!=null;)n.push(r),a.push(r),r=r.nextSibling;for(;n.length>0;){let l=n.pop();t.parentElement?.insertBefore(l,t.nextSibling)}return a}function de(e,t,r){let n;n=e.firstChild;let a=n,o=0;for(;n;){let l=fe(n,t,r);l>o&&(a=n,o=l),n=n.nextSibling}return a}function fe(e,t,r){return I(t,e)?.5+L(r,e,t):0}function J(e,t){if(S(t,e),t.config.twoPass&&me(t,e)&&e instanceof Element)_(e,t);else{if(t.callbacks.beforeNodeRemoved(e)===!1)return;e.parentNode?.removeChild(e),t.callbacks.afterNodeRemoved(e)}}function _(e,t){if(t.callbacks.beforeNodePantried(e)!==!1)if(Array.from(e.childNodes).forEach(r=>{_(r,t)}),t.persistentIds.has(e.id))t.pantry.moveBefore?t.pantry.moveBefore(e,null):t.pantry.insertBefore(e,null);else{if(t.callbacks.beforeNodeRemoved(e)===!1)return;e.parentNode?.removeChild(e),t.callbacks.afterNodeRemoved(e)}}function Y(e,t){e instanceof Element&&(Array.from(t.pantry.children).reverse().forEach(r=>{let n=e.querySelector(`#${r.id}`);if(n){if(n.parentElement?.moveBefore)for(n.parentElement.moveBefore(r,n);n.hasChildNodes();)r.moveBefore(n.firstChild,null);else for(n.before(r);n.firstChild;)r.insertBefore(n.firstChild,null);t.callbacks.beforeNodeMorphed(r,n)!==!1&&(q(n,r,t),t.callbacks.afterNodeMorphed(r,n)),n.remove()}}),t.pantry.remove())}function ce(e,t){return!e.deadIds.has(t)}function he(e,t,r){return(e.idMap.get(r)||u).has(t)}function S(e,t){let r=e.idMap.get(t)||u;for(let n of r)e.deadIds.add(n)}function me(e,t){for(let r of e.idMap.get(t)||u)if(e.persistentIds.has(r))return!0;return!1}function L(e,t,r){let n=e.idMap.get(t)||u,a=0;for(let o of n)ce(e,o)&&he(e,o,r)&&++a;return a}function D(e){let t=Array.from(e.querySelectorAll("[id]"));return e.id&&t.push(e),t}function z(e,t){let r=e.parentElement;for(let n of D(e)){let a=n;for(;a!==r&&a!=null;){let o=t.get(a);o==null&&(o=new Set,t.set(a,o)),o.add(n.id),a=a.parentElement}}}function pe(e,t){let r=new Map;return z(e,r),z(t,r),r}function ge(e,t){let r=o=>o.tagName+"#"+o.id,n=new Set(D(e).map(r)),a=new Set;for(let o of D(t))n.has(r(o))&&a.add(o.id);return a}return{morph:s,defaults:i}}();var v=class{static async reload(i){let s=await A();return new v(s,i).reload()}static async reloadAll(){return Stimulus.controllers.forEach(i=>{Stimulus.unload(i.identifier),Stimulus.register(i.identifier,i.constructor)}),Promise.resolve()}constructor(i,s){this.document=i,this.changedFilePath=s,this.application=window.Stimulus}async reload(){p("Reload Stimulus controllers..."),this.application.stop(),await this.#t(),this.#u(),this.application.start()}async#t(){await Promise.all(this.#e.map(async i=>this.#l(i)))}get#e(){return this.controllerPathsToReload=this.controllerPathsToReload||this.#r.filter(i=>this.#a(i)),this.controllerPathsToReload}get#r(){return Object.keys(this.#i).filter(i=>i.endsWith("_controller"))}#a(i){return this.#s(i)===this.#n}get#n(){return this.changedControllerIdentifier=this.changedControllerIdentifier||this.#s(this.changedFilePath),this.changedControllerIdentifier}get#i(){return this.pathsByModule=this.pathsByModule||this.#o(),this.pathsByModule}#o(){let i=this.document.querySelector("script[type=importmap]");return JSON.parse(i.text).imports}async#l(i){p(`	${i}`);let s=this.#s(i),g=await import(P(this.#c(i)));this.#h(s,g)}#u(){this.#d.forEach(i=>this.#m(i.identifier))}get#d(){return this.#f?[]:this.application.controllers.filter(i=>this.#n===i.identifier)}get#f(){return this.#e.length>0}#c(i){return this.#i[i]}#s(i){return i.replace(/^\/+/,"").replace(/^controllers\//,"").replace("_controller","").replace(/\//g,"--").replace(/_/g,"-").replace(/\.js$/,"")}#h(i,s){this.application.unload(i),this.application.register(i,s.default)}#m(i){p(`	Removing controller ${i}`),this.application.unload(i)}};var M=class{static async reload(){return new M().reload()}async reload(){await this.#t(),await this.#r()}async#t(){p("Reload HTML...");let i=await A();return this.#e(i.body),i}#e(i){Z.morph(document.body,i)}async#r(){await v.reloadAll()}};var k=class{static async reload(...i){return new k(...i).reload()}constructor(i=/./){this.filePattern=i}async reload(){p("Reload css..."),await Promise.all(await this.#t())}async#t(){return(await this.#e()).map(s=>this.#r(s))}async#e(){let i=await A();return Array.from(i.head.querySelectorAll("link[rel='stylesheet']"))}#r(i){return this.#a(i)?this.#n(i):Promise.resolve()}#a(i){return this.filePattern.test(i.getAttribute("href"))}async#n(i){return new Promise(s=>{let c=i.getAttribute("href"),g=this.#i(i)||this.#l(i);g.setAttribute("href",P(i.getAttribute("href"))),g.onload=()=>{p(`	${c}`),s()}})}#i(i){return this.#o.find(s=>F(i.href)===F(s.href))}get#o(){return Array.from(document.querySelectorAll("link[rel='stylesheet']"))}#l(i){return document.head.append(i),i}};var R=class{static async start(){let i=new EventSource("/hotwired-laravel-hotreload/sse");i.addEventListener("tick",()=>{document.body.setAttribute("data-hotwire-hotreload-ready","true")},{once:!0}),i.addEventListener("reload_html",s=>{let c=JSON.parse(s.data);return(HotwireHotreload.config.htmlReloadMethod==="morph"?M:E).reload(c.path)}),i.addEventListener("reload_stimulus",s=>{if(window.Stimulus){let c=JSON.parse(s.data);return v.reload(c.path)}}),i.addEventListener("reload_css",s=>{let c=JSON.parse(s.data);return k.reload(new RegExp(K(c.path)))})}};var x={loggingEnabled:!1,htmlReloadMethod:"morph"},j={config:{...x}};window.HotwireHotreload=j;var ve={loggingEnabled:"logging",htmlReloadMethod:"html-reload-method"},ee=async()=>{Object.entries(ve).forEach(([u,i])=>{j.config[u]=X(i)??x[u]})};document.addEventListener("DOMContentLoaded",async()=>{await ee(),await R.start()});document.addEventListener("turbo:load",async()=>{await ee()});var G=j;})();
//# sourceMappingURL=hotreload.min.js.map
